var I=Object.defineProperty,$=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var y=(e,n,s)=>n in e?I(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,v=(e,n)=>{for(var s in n||(n={}))T.call(n,s)&&y(e,s,n[s]);if(_)for(var s of _(n))k.call(n,s)&&y(e,s,n[s]);return e},g=(e,n)=>$(e,R(n));import{u as O,a as b,c as q,r as o,j as a,b as r,L as h,F as j,R as w,d as B,e as L,B as A,f as E,g as p,h as M,i as z,P as D}from"./vendor.d630561d.js";const P=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const i of d.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerpolicy&&(d.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?d.credentials="include":t.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function c(t){if(t.ep)return;t.ep=!0;const d=s(t);fetch(t.href,d)}};P();const W="_wrapper_1f813_1",F="_list_1f813_9";var N={wrapper:W,list:F};const U=()=>O(),u=b,H={data:[],images:[],countryWiseBrands:{},uniqueCountries:[]},C=q({name:"brands",initialState:H,reducers:{initBrands:(e,n)=>{e.data=n.payload,e.countryWiseBrands=n.payload.reduce((s,c)=>(s[c.Country]=s[c.Country]||[],s[c.Country].push(c),s),{}),e.uniqueCountries=Object.keys(e.countryWiseBrands)},initImages:(e,n)=>{e.images=n.payload},loadMore:e=>{e.uniqueCountries=e.uniqueCountries.concat(Object.keys(e.countryWiseBrands))}}}),{initBrands:V,initImages:K,loadMore:G}=C.actions,S=e=>e.brands.images.at(Math.floor(Math.random()*e.brands.images.length)).Image,J=e=>e.brands.uniqueCountries,Q=e=>n=>n.brands.countryWiseBrands[e],X=e=>n=>n.brands.data.filter(s=>s.Brand===e)[0];var Y=C.reducer;const Z=(e,n)=>{const s=o.exports.useCallback(c=>{new IntersectionObserver(t=>{t.forEach(d=>{d.intersectionRatio>0&&n()})}).observe(c)},[n]);o.exports.useEffect(()=>{e.current&&s(e.current)},[s,e])},ee=()=>{const e=U(),n=o.exports.useRef(null);o.exports.useEffect(()=>{fetch("https://s3-ap-southeast-1.amazonaws.com/he-public-data/TopRamen8d30951.json").then(t=>{if(t.ok)return t.json();console.error(t.statusText)}).then(t=>{e(V(t))}).catch(console.error),fetch("https://s3-ap-southeast-1.amazonaws.com/he-public-data/noodlesec253ad.json").then(t=>{if(t.ok)return t.json();console.error(t.statusText)}).then(t=>e(K(t))).catch(console.error)},[]);const s=u(J),c=o.exports.useCallback(()=>{setTimeout(()=>{e(G())},1e3)},[]);return Z(n,c),a("div",{className:N.wrapper,children:[r("ul",{className:N.list,children:Array.isArray(s)&&s.map((t,d)=>r("li",{children:r(h,{to:encodeURI(`/country/${t}`),className:"link",children:t})},`${t}-${d}`))}),r("div",{id:"page-bottom-boundary",style:{border:"4px solid red"},ref:n,children:"loading..."})]})},re="_header_1i2r3_1",ne="_container_1i2r3_8";var x={header:re,container:ne};const se=()=>r("header",{className:x.header,children:r("div",{className:x.container,children:r(h,{to:"/",children:r("h1",{children:"Brands"})})})}),te=({children:e})=>a(j,{children:[r(se,{}),r("div",{className:"container",children:e})]}),ae="_wrapper_1wj2f_1";var de={wrapper:ae};const ce="_brands_131qi_1";var oe={brands:ce};const ie="_card_1gk7m_1",le="_card__logo_1gk7m_24",ue="_card__details_1gk7m_39";var m={card:ie,card__logo:le,card__details:ue};const he=w.memo(e=>{const n=b(S);return r("div",{className:m.card,children:a(h,{to:encodeURI(`/brand/${e.Brand}`),style:{textDecoration:"none"},children:[r("div",{className:m.card__logo,children:r("img",{"data-src":n,alt:`Showcase image of ${e.Brand}`,className:"lazy"})}),a("div",{className:m.card__details,children:[r("h2",{children:e.Brand}),a("dl",{children:[a("div",{children:[r("dt",{children:"Stars"}),r("dd",{children:e.Stars})]}),a("div",{children:[r("dt",{children:"Country"}),r("dd",{children:e.Country})]}),a("div",{children:[r("dt",{children:"Style"}),r("dd",{children:e.Style})]}),a("div",{children:[r("dt",{children:"variety"}),r("dd",{children:e.Variety})]}),a("div",{children:[r("dt",{children:"Top ten"}),r("dd",{children:e["Top Ten"]})]})]})]})]})})}),pe=({data:e})=>r("div",{className:oe.brands,children:e&&e.map((n,s)=>o.exports.createElement(he,g(v({},n),{key:`${n.Brand}-${s}`})))}),me=e=>{const n=o.exports.useCallback(s=>{const c=new IntersectionObserver(t=>{t.forEach(d=>{if(d.intersectionRatio>0){const i=d.target,f=i.dataset.src;f?i.src=f:console.error("Image source is invalid"),c.unobserve(s)}})});c.observe(s)},[]);o.exports.useEffect(()=>{document.querySelectorAll(e).forEach(s=>n(s))},[n,e])},fe=e=>{if(!Array.isArray(e))return[];let n=5;for(;n>0;)e=e.concat(e),n--;return e},_e=()=>{const{code:e}=B();if(me(".lazy"),!e)return r("div",{children:"invalid query param"});const n=u(Q(e)),s=fe(n);return r("div",{className:de.wrapper,children:r(pe,{data:s})})},ye="_wrapper_1i43l_1",ve="_brand_1i43l_5",ge="_img_w_1i43l_9",be="_details_1i43l_18",we="_dls_1i43l_26";var l={wrapper:ye,brand:ve,img_w:ge,details:be,dls:we};const Be=({})=>{const{id:e}=B();if(!e)return r("div",{children:"invalid query"});const n=u(X(e)),s=u(S);return n?r("div",{className:l.wrapper,children:a("section",{className:l.brand,children:[r("div",{className:l.img_w,children:r("img",{src:s})}),a("div",{className:l.details,children:[r("h2",{children:n.Brand}),r("div",{children:r("div",{className:l.dls,children:a("dl",{children:[a("div",{children:[r("dt",{children:"Stars"}),r("dd",{children:n.Stars})]}),a("div",{children:[r("dt",{children:"Country"}),r("dd",{children:n.Country})]}),a("div",{children:[r("dt",{children:"Style"}),r("dd",{children:n.Style})]}),a("div",{children:[r("dt",{children:"variety"}),r("dd",{children:n.Variety})]}),a("div",{children:[r("dt",{children:"Top ten"}),r("dd",{children:n["Top Ten"]})]})]})})})]})]})}):r("div",{children:"brand not found"})};function Ne(){const{pathname:e}=L();return o.exports.useEffect(()=>{window.scrollTo(0,0)},[e]),null}function Ce(){return r("div",{children:a(A,{basename:"/yk-infy-scroll-lazy-load",children:[r(Ne,{}),r(te,{children:a(E,{children:[r(p,{path:"/",element:r(ee,{})}),r(p,{path:"/country/:code",element:r(_e,{})}),r(p,{path:"/brand/:id",element:r(Be,{})})]})})]})})}const Se=M({reducer:{brands:Y}});z.render(r(w.StrictMode,{children:r(D,{store:Se,children:r(Ce,{})})}),document.getElementById("root"));
